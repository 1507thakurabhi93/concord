flows:
  default:
  - form: authForm
    yield: true

  - task: ansible2
    in:
      # remote user
      user: "app"

      # export the secret using the provided name and password
      privateKey: ${authForm}

      # location of the playbook
      playbook: playbook/hello.yml

      # inventory data, should match the playbook's host groups
      inventory:
        local:
          hosts:
          - "127.0.0.1"

      # pass additional variables to the playbook
      extraVars:
        greetings: "Hi there!"

forms:
  authForm:
  # the secret's password
  - secretName: {type: "string", label: "Secret name"}
  - password: {type: "string", inputType: "password", label: "Password"}

configuration:
  dependencies:
  - "mvn://com.walmartlabs.concord.plugins.basic:ansible-tasks:0.43.0"

