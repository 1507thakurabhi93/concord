flows:
  default:
  # "forks" the current process as a child process
  - task: concord
    in:
      action: fork

      # if not specified, the parent's entry point will be used
      entryPoint: sayHello

      # wait for completion
      sync: true

      # additional arguments
      arguments:
        otherName: "${initiator.username}"

  - log: "Done! ${jobs} is completed"

  sayHello:
  # forked processes can access the latest snapshot of the parent's
  # state in addition to the arguments provided by the parent task
  - log: "FORK: Hello, ${otherName}. I'm ${myName}"

  # simulate a long-running process, sleep for 10s
  - ${sleep.ms(10000)}

configuration:
  dependencies:
  - "mvn://com.walmartlabs.concord.plugins:concord-tasks:0.32.0"

  arguments:
    concord:
      # default parameters, can be overridden with `in` parameters of
      # the task
      baseUrl: "http://server.dev.concord.devtools.prod.walmart.com:8001"
      apiKey: "lzfJQL4u2gsH7toQveFYSQ"

    myName: "Concord"